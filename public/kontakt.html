<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kontakta oss</title>
  <link rel="stylesheet" href="CSS/kontakt.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
  />
</head>
<body>
  <div class="sidebar">
  <div class="logo">
    <a href="customerportal.html">
      <img src="images/logo.png" alt="Logotyp" class="logo-img" />
    </a>
  </div>
  <ul class="nav-menu">
    <li><a href="customerportal.html"><i class="fas fa-home"></i> Hem</a></li>
    <li><a href="betalningar.html"><i class="fas fa-credit-card"></i> Betalningar</a></li>
    <li class="active"></li><a href="kontakt.html"><i class="fas fa-envelope"></i> Kontakt</a></li>
    <li><a href="rapporter.html"><i class="fas fa-chart-line"></i> Rapporter</a></li>
    <li><a href="fakturor.html"><i class="fas fa-file-invoice"></i> Fakturor</a></li>
    <li><a href="kunder.html"><i class="fas fa-users"></i> Kunder</a></li>
    <li><a href="analytics.html"><i class="fas fa-chart-pie"></i> Analyser</a></li>
    <li><a href="marknadsf√∂ring.html"><i class="fas fa-bullhorn"></i> Marknadsf√∂ring</a></li>
    <li><a href="inventarier.html"><i class="fas fa-box"></i> Inventarier</a></li>
    <li><a href="installningar.html"><i class="fas fa-cog"></i> Inst√§llningar</a></li>
  </ul>
  <div class="help">
    <a href="faq.html"><i class="fas fa-question-circle"></i> Hj√§lp</a>
  </div>
</div>
 <div class="main">
  <h2 class="page-title">Kontakta oss</h2>

  <!-- Chatta med oss: St√∂rre sektion -->
  <div class="card contact-section chat-section">
    <div class="icon-column">
      <i class="fas fa-comments icon icon-circle"></i>
    </div>
    <div class="content-column">
      <h3>Chatta med oss</h3>
      <p class="subtitle">Vi √§r tillg√§ngliga <strong>24/7</strong></p>
      <p>Klicka p√• knappen nedan f√∂r att starta en chatt med v√•rt supportteam.</p>
      <button class="black-button">Starta chatt</button>
    </div>
  </div>

  <!-- Ring oss -->
  <div class="card contact-section">
    <div class="icon-column">
      <i class="fas fa-phone icon icon-circle"></i>
    </div>
    <div class="content-column">
      <h3>Ring oss</h3>
      <p class="subtitle">Beh√∂ver du prata med oss direkt?</p>
      <p><i class="fas fa-phone"></i> +46 73 322 12 12</p>
    </div>
  </div>

  <!-- Vanliga fr√•gor -->
  <div class="card contact-section">
    <div class="icon-column">
      <i class="fas fa-question-circle icon icon-circle"></i>
    </div>
    <div class="content-column">
      <h3>Vanliga fr√•gor</h3>
      <ul class="faq-list">
        <li>
          <button class="faq-question">Hur snabbt f√•r jag svar fr√•n supporten?</button>
          <div class="faq-answer">Vi svarar vanligtvis inom 1‚Äì2 timmar under kontorstid.</div>
        </li>
        <li>
          <button class="faq-question">Vad kostar det att komma ig√•ng?</button>
          <div class="faq-answer">Det √§r helt kostnadsfritt att komma ig√•ng med v√•r basversion.</div>
        </li>
        <li>
          <button class="faq-question">Kan ni hj√§lpa till med hela hemsidan?</button>
          <div class="faq-answer">Ja, v√•rt team kan hj√§lpa till med b√•de design, inneh√•ll och funktioner.</div>
        </li>
      </ul>
    </div>
  </div>
  <div class="profile-wrapper">
  <div class="profile-icon" id="profileToggle">--</div>

  <div class="profile-dropdown" id="profileMenu">
    <div class="profile-email" id="userEmail">Laddar...</div>
    <hr />
    <a href="#" id="switchAccount">Byt konto</a>
    <a href="#" id="openSettings">Profilinst√§llningar</a>
    <a href="login.html" id="logout">Logga ut</a>
  </div>
</div>


</div>

<script>
  document.querySelectorAll('.faq-question').forEach((button) => {
    button.addEventListener('click', () => {
      const answer = button.nextElementSibling;
      answer.style.display = answer.style.display === 'block' ? 'none' : 'block';
    });
  });
</script>
<script>
  const toggle = document.getElementById('profileToggle');
  const menu = document.getElementById('profileMenu');

 toggle.addEventListener('click', () => {
  const isOpen = menu.style.display === 'flex';
  menu.style.display = isOpen ? 'none' : 'flex';

  // L√§gg till / ta bort klassen 'open' f√∂r att trigga CSS-zoom
  toggle.classList.toggle('open', !isOpen);
});


  // Klick utanf√∂r st√§nger menyn
  window.addEventListener('click', function(e) {
    if (!document.querySelector('.profile-wrapper').contains(e.target)) {
      menu.style.display = 'none';
    }
  });
</script>
<script>
  // Byt konto ‚Äì Exempelvis redirect till inloggning
  document.getElementById("switchAccount").addEventListener("click", function (e) {
    e.preventDefault();
    if (confirm("Vill du logga ut och byta konto?")) {
      window.location.href = "login.html";
    }
  });

  // Profilinst√§llningar ‚Äì G√• till profilsida
  document.getElementById("openSettings").addEventListener("click", function (e) {
    e.preventDefault();
    window.location.href = "profile.html";
  });

  // Spr√•k ‚Äì Exempel-popup
  document.getElementById("changeLanguage").addEventListener("click", function (e) {
    e.preventDefault();
    alert("Spr√•kval kommer snart!");
    // Alternativ: visa modal f√∂r spr√•kval
  });

 document.getElementById("logout").addEventListener("click", function (e) {
  e.preventDefault();
  if (confirm("√Ñr du s√§ker p√• att du vill logga ut?")) {
    fetch('/logout', {
      method: 'GET',
      credentials: 'include' // üß† Viktigt: skicka med cookies
    })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        localStorage.clear(); // om du anv√§nder det
        window.location.href = "/login.html";
      } else {
        alert("Utloggning misslyckades.");
      }
    })
    .catch(err => {
      console.error("Fel vid utloggning:", err);
      alert("Kunde inte logga ut.");
    });
  }
});

</script>
<script>
  async function loadUserProfile() {
  try {
    const res = await fetch("/api/profile/me");
    const data = await res.json();

    if (data.success) {
      const name = data.name || '';
      const email = data.email || '';
      const image = data.profileImage;

      // Visa bild om den finns, annars visa initialer
      if (image) {
        document.getElementById("profileToggle").innerHTML = `
          <img src="${image}" alt="Profilbild" style="width: 32px; height: 32px; border-radius: 50%;" />
        `;
      } else {
        const initials = name
          .split(' ')
          .map(part => part.charAt(0).toUpperCase())
          .join('')
          .substring(0, 2);
        document.getElementById("profileToggle").textContent = initials;
      }

      document.getElementById("userEmail").textContent = email;
    } else {
      document.getElementById("profileToggle").textContent = "??";
      document.getElementById("userEmail").textContent = "Ej inloggad";
    }
  } catch (err) {
    console.error("Fel vid h√§mtning av anv√§ndarprofil:", err);
  }
}

  loadUserProfile();
</script>

