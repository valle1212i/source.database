<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kontakta oss</title>
  <link rel="stylesheet" href="CSS/kontakt.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
  />
</head>
<body>
  <!-- Hamburgermeny för mobil -->
<button class="hamburger-menu" onclick="toggleSidebar()">☰</button>


  <div class="sidebar">
  <div class="logo">
    <a href="customerportal.html">
      <img src="images/logo.png" alt="Logotyp" class="logo-img" />
    </a>
  </div>
  <ul class="nav-menu">
    <li><a href="customerportal.html"><i class="fas fa-home"></i> Hem</a></li>
    <li><a href="betalningar.html"><i class="fas fa-credit-card"></i> Betalningar</a></li>
    <li class="active"><a href="kontakt.html"><i class="fas fa-envelope"></i> Kontakt</a></li>
    <li><a href="rapporter.html"><i class="fas fa-chart-line"></i> Rapporter</a></li>
    <li><a href="fakturor.html"><i class="fas fa-file-invoice"></i> Fakturor</a></li>
    <li><a href="kunder.html"><i class="fas fa-users"></i> Kunder</a></li>
    <li><a href="analytics.html"><i class="fas fa-chart-pie"></i> Analyser</a></li>
    <li><a href="marknadsforing.html"><i class="fas fa-bullhorn"></i> Marknadsföring</a></li>
    <li><a href="inventarier.html"><i class="fas fa-box"></i> Inventarier</a></li>
    <li><a href="installningar.html"><i class="fas fa-cog"></i> Inställningar</a></li>
  </ul>
  <div class="help">
    <a href="faq.html"><i class="fas fa-question-circle"></i> Hjälp</a>
  </div>
</div>
 <div class="main">
  <h2 class="page-title">Kontakta oss</h2>

  <!-- Chatta med oss: Större sektion -->
  <div class="card contact-section chat-section">
    <div class="icon-column">
      <i class="fas fa-comments icon icon-circle"></i>
    </div>
    <div class="content-column">
      <h3>Chatta med oss</h3>
      <p class="subtitle">Vi är tillgängliga <strong>24/7</strong></p>
      <p>Klicka på knappen nedan för att starta en chatt med vårt supportteam.</p>
      <button class="black-button" onclick="window.location.href='chatwindow.html'">Starta chatt</button>
    </div>
  </div>

  <!-- Ring oss -->
  <div class="card contact-section">
    <div class="icon-column">
      <i class="fas fa-phone icon icon-circle"></i>
    </div>
    <div class="content-column">
      <h3>Ring oss</h3>
      <p class="subtitle">Behöver du prata med oss direkt?</p>
      <p><i class="fas fa-phone"></i> +46 73 322 12 12</p>
    </div>
  </div>

  <!-- Vanliga frågor -->
  <div class="card contact-section">
    <div class="icon-column">
      <i class="fas fa-question-circle icon icon-circle"></i>
    </div>
    <div class="content-column">
      <h3>Vanliga frågor</h3>
      <ul class="faq-list">
        <li>
          <button class="faq-question">Hur snabbt får jag svar från supporten?</button>
          <div class="faq-answer">Vi svarar vanligtvis inom 1–2 timmar under kontorstid.</div>
        </li>
        <li>
          <button class="faq-question">Vad kostar det att komma igång?</button>
          <div class="faq-answer">Det är helt kostnadsfritt att komma igång med vår basversion.</div>
        </li>
        <li>
          <button class="faq-question">Kan ni hjälpa till med hela hemsidan?</button>
          <div class="faq-answer">Ja, vårt team kan hjälpa till med både design, innehåll och funktioner.</div>
        </li>
      </ul>
    </div>
  </div>
  <div class="profile-wrapper">
  <div class="profile-icon" id="profileToggle">--</div>

  <div class="profile-dropdown" id="profileMenu">
    <div class="profile-email" id="userEmail">Laddar...</div>
    <hr />
    <a href="#" id="switchAccount">Byt konto</a>
    <a href="#" id="openSettings">Profilinställningar</a>
    <a href="login.html" id="logout">Logga ut</a>
  </div>
</div>


</div>

<script>
  document.querySelectorAll('.faq-question').forEach((button) => {
    button.addEventListener('click', () => {
      const answer = button.nextElementSibling;
      answer.style.display = answer.style.display === 'block' ? 'none' : 'block';
    });
  });
</script>
<script>
  const toggle = document.getElementById('profileToggle');
  const menu = document.getElementById('profileMenu');

 toggle.addEventListener('click', () => {
  const isOpen = menu.style.display === 'flex';
  menu.style.display = isOpen ? 'none' : 'flex';

  // Lägg till / ta bort klassen 'open' för att trigga CSS-zoom
  toggle.classList.toggle('open', !isOpen);
});


  // Klick utanför stänger menyn
  window.addEventListener('click', function(e) {
    if (!document.querySelector('.profile-wrapper').contains(e.target)) {
      menu.style.display = 'none';
    }
  });
</script>
<script>
  // Byt konto – Exempelvis redirect till inloggning
  document.getElementById("switchAccount").addEventListener("click", function (e) {
    e.preventDefault();
    if (confirm("Vill du logga ut och byta konto?")) {
      window.location.href = "login.html";
    }
  });

  // Profilinställningar – Gå till profilsida
  document.getElementById("openSettings").addEventListener("click", function (e) {
    e.preventDefault();
    window.location.href = "profile.html";
  });

  // Språk – Exempel-popup
  document.getElementById("changeLanguage").addEventListener("click", function (e) {
    e.preventDefault();
    alert("Språkval kommer snart!");
    // Alternativ: visa modal för språkval
  });

</script>
<script>
  async function loadUserProfile() {
  try {
    const res = await fetch("/api/profile/me");
    const data = await res.json();

    if (data.success) {
      const name = data.name || '';
      const email = data.email || '';
      const image = data.profileImage;

      // Visa bild om den finns, annars visa initialer
        const container = document.getElementById("profileToggle");
        while (container.firstChild) container.removeChild(container.firstChild);

        if (image) {
          const img = document.createElement("img");
          img.src = image;
          img.alt = "Profilbild";
          img.style.width = "32px";
          img.style.height = "32px";
          img.style.borderRadius = "50%";
          container.appendChild(img);
        } else {
          const initials = (name || "")
            .split(" ")
            .map(part => part.charAt(0).toUpperCase())
            .join("")
            .substring(0, 2);
          container.textContent = initials || "--";
        }

      document.getElementById("userEmail").textContent = email;
    } else {
      document.getElementById("profileToggle").textContent = "??";
      document.getElementById("userEmail").textContent = "Ej inloggad";
    }
  } catch (err) {
    console.error("Fel vid hämtning av användarprofil:", err);
  }
}

  loadUserProfile();
</script>
<script>
  function toggleSidebar() {
    const sidebar = document.querySelector(".sidebar");
    const isActive = sidebar.classList.contains("active");

    sidebar.classList.toggle("active", !isActive);
    document.body.classList.toggle("menu-open", !isActive);
  }
</script>
<script src="/js/logout.js"></script>
</body>
